# Тряска ландшафта

## Описание
Создать зоны тряски на карте, где тайлы немного трясутся. Здания в этих зонах постепенно теряют прочность. Сила тряски зависит от расстояния до центра. Добавить новое здание "Стабилизатор", которое при подаче ресурсов создаёт зону стабильности, подавляющую тряску.

## Оценка сложности
**Высокая (8/10)**

- Хранение координат зон тряски
- Анимация тряски без создания пустот между тайлами
- Расчёт урона по радиусу
- Новая механика потребления "стабильности"
- Overlay система для радиусов

## Оценка интересности
**Очень высокая (9/10)**

Добавляет динамическую опасность на карте. Создаёт новую стратегическую задачу (защита/стабилизация территории). Визуально эффектная механика.

## Краткий план реализации

1. **База данных**:
   - Таблица `shake_zone`: id, x, y, radius, intensity
   - entity_type "Стабилизатор"
   - recipe для стабилизатора (потребляет ресурсы → производит "стабильность")

2. **Анимация тряски**:
   - Не двигать сами тайлы (создаст пустоты)
   - Двигать только sprite entities на этих тайлах
   - Использовать Math.sin(time + entityId) для случайности
   - Amplitude = intensity * (1 - distance/radius)

3. **Урон от тряски**:
   - Каждые 10 секунд: проверка entities в зонах тряски
   - Урон = intensity * (1 - distance/radius) * 0.1
   - Проверка зон стабильности (отменяют тряску)

4. **Стабилизатор**:
   - Потребляет ресурсы (например, энергетические кристаллы)
   - Создаёт радиус стабильности (визуальный overlay)
   - Без ресурсов → не работает

5. **Frontend**:
   - ShakeManager.js: управление анимациями
   - Overlay для зон тряски (красные круги)
   - Overlay для зон стабильности (синие круги)

6. **Генерация зон**:
   - При создании карты: случайные зоны тряски
   - Можно хранить в map_metadata или отдельной таблице
