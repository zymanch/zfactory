# Система электричества

## Описание
Некоторые здания требуют электричество для работы. Нужны электростанции (генераторы) и провода/столбы для передачи электричества.

## Оценка сложности
**Высокая (8/10)**

- Расчёт электросетей (граф связности)
- Генерация и потребление электричества
- Визуализация сетей (провода между столбами)
- Проверка доступности электричества для каждого здания
- UI индикаторы (сколько производится/потребляется)

## Оценка интересности
**Высокая (8/10)**

Добавляет новый ресурс (электричество), который нужно производить и распределять. Создаёт дополнительный вызов в планировании базы.

## Краткий план реализации

1. **База данных**:
   - entity_type: добавить поля
     - requires_power (boolean)
     - power_generation (int, для генераторов)
     - power_consumption (int)
   - entity: добавить поле has_power (boolean)

2. **Типы генераторов**:
   - **Паровой генератор** (уже есть steam_engine): 100 единиц
   - **Солнечная панель**: 50 единиц (не требует топлива)
   - **Ядерный реактор**: 500 единиц (требует уран)

3. **Передача электричества**:
   - **Вариант 1 (простой)**: радиус от генератора (5-10 тайлов)
     - Здания в радиусе → получают электричество
     - Столбы расширяют радиус

   - **Вариант 2 (сложный)**: сети
     - Граф связности через столбы
     - Расчёт каждого тика: генерация vs потребление
     - Если недостаточно → отключение зданий (по приоритету)

4. **Frontend**:
   - Overlay режим "Электросеть"
     - Зелёные зоны: есть электричество
     - Красные: нет электричества
     - Линии между столбами
   - Индикатор в UI: "⚡ 450/500" (потребление/генерация)
   - Иконка молнии на зданиях без электричества

5. **Поведение зданий**:
   - Без электричества: не работают (красный спрайт)
   - С электричеством: нормальная работа
   - Потребление электричества не расходует ресурсы (просто требование)

6. **Backend логика**:
   - При каждом тике игры:
     1. Найти все генераторы
     2. Построить граф сетей через столбы
     3. Для каждой сети: сумма генерации и потребления
     4. Обновить has_power для всех entity в сети

7. **Расширение**:
   - Аккумуляторы (хранят электричество)
   - Трансформаторы (увеличивают радиус передачи)
   - Умные переключатели (приоритеты потребителей)
