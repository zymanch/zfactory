# Дерево технологий

## Описание
Система исследований (technology tree). Технологии разблокируют:
- Другие технологии (зависимости)
- Рецепты
- Новые типы зданий (entity_type)

Каждая технология имеет стоимость (ресурсы для исследования).

## Оценка сложности
**Высокая (8/10)**

- Множество таблиц для связей
- UI для дерева технологий (граф, визуализация)
- Логика разблокировки
- Система "научных пакетов" (science packs)
- Прогресс исследований

## Оценка интересности
**Очень высокая (10/10)**

Даёт чувство прогресса, открытия нового. Структурирует игровой процесс. Мотивирует к развитию производства.

## Краткий план реализации

1. **База данных**:
   - Таблица `technology`:
     - id, name, description, research_time, icon

   - Таблица `technology_dependency`:
     - technology_id, required_technology_id

   - Таблица `technology_cost`:
     - technology_id, resource_id, quantity

   - Таблица `technology_unlock_recipe`:
     - technology_id, recipe_id

   - Таблица `technology_unlock_entity_type`:
     - technology_id, entity_type_id

   - Таблица `user_technology`:
     - user_id, technology_id, researched, progress (0-100%)

2. **Научные пакеты** (Science Packs):
   - **Red Science**: 1 Iron Gear + 1 Copper Wire (базовые технологии)
   - **Green Science**: сложнее (автоматизация)
   - **Blue Science**: ещё сложнее (продвинутое производство)
   - **Purple/Yellow**: поздняя игра

3. **Лаборатория** (Lab):
   - Новый entity_type "Лаборатория"
   - Принимает научные пакеты
   - Производит research points
   - Несколько лабораторий → быстрее исследование

4. **Примеры технологий**:
   - **Автоматизация 1**: разблокирует Assembler, Conveyor
   - **Логистика 1**: разблокирует Manipulator
   - **Сталь**: разблокирует рецепт Steel Ingot
   - **Электричество**: разблокирует генераторы, столбы
   - **Военное дело**: разблокирует башни
   - **Продвинутая обработка**: разблокирует Пресс

5. **Frontend - UI дерева**:
   - ResearchWindow.js: модальное окно с деревом
   - Узлы технологий: иконка, название, статус
     - Серый = не доступна (нет зависимостей)
     - Жёлтый = доступна
     - Зелёный = исследуется
     - Синий = исследована
   - Линии связей между технологиями
   - Клик на технологию: показать детали, кнопка "Исследовать"

6. **Backend API**:
   - `research/tree`: получить все технологии + статус
   - `research/start`: начать исследование (проверка ресурсов, зависимостей)
   - `research/progress`: текущий прогресс

7. **Процесс исследования**:
   - Игрок выбирает технологию → списываются ресурсы
   - Лаборатории потребляют научные пакеты → прогресс растёт
   - При 100%: технология researched, разблокировка контента

8. **Структура дерева**:
   ```
   [Автоматизация 1]
        ↓
   [Логистика 1] → [Автоматизация 2]
        ↓                ↓
   [Логистика 2]    [Продвинутая обработка]
   ```

9. **Балансировка**:
   - Ранние технологии: дешёвые, быстрые (1-2 минуты)
   - Поздние: дорогие, долгие (10-30 минут)
   - Всего ~30-50 технологий для начала
