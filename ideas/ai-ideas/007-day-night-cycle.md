# Цикл день-ночь

## Описание
Динамическая смена освещения в течение игрового дня:
- День (светло, хорошая видимость)
- Сумерки (средняя освещённость)
- Ночь (темно, плохая видимость)
- Рассвет (становится светлее)

Дополнительная механика:
- Солнечные панели работают только днём
- Враги сильнее/агрессивнее ночью
- Освещение (лампы, прожекторы)

## Оценка сложности
**Средняя (6/10)**

- PIXI.js фильтры для затемнения
- Таймер игрового времени
- Освещение от ламп (точечные источники света)
- Солнечные панели (зависимость от времени суток)
- Изменение поведения врагов

## Оценка интересности
**Высокая (8/10)**

Добавляет атмосферу и визуальное разнообразие. Создаёт новые геймплейные вызовы (освещение базы, оборона ночью).

## Краткий план реализации

1. **Время игры**:
   - 1 полный цикл = 20 минут реального времени
   - День: 0-8 мин (8 мин)
   - Сумерки: 8-10 мин (2 мин)
   - Ночь: 10-18 мин (8 мин)
   - Рассвет: 18-20 мин (2 мин)

2. **Освещение** (global):
   - PIXI.filters.ColorMatrixFilter для затемнения
   - День: brightness = 1.0
   - Сумерки: brightness = 0.7
   - Ночь: brightness = 0.3
   - Плавные переходы (lerp)

3. **Локальное освещение**:
   - entity_type "Lamp" (лампа)
   - Радиус освещения: 10 тайлов
   - PIXI.Graphics: radial gradient (светлый центр → тёмные края)
   - Blend mode: ADD или SCREEN
   - Работает только при наличии электричества

4. **Солнечные панели**:
   - entity_type "Solar Panel"
   - Генерация энергии:
     - День: 100% (60 кВт)
     - Сумерки: 50% (30 кВт)
     - Ночь: 0%
     - Рассвет: 50% (30 кВт)
   - Без топлива, экологично

5. **Аккумуляторы**:
   - entity_type "Accumulator"
   - Хранит электричество (5 MJ)
   - Днём: заряжается от солнечных панелей
   - Ночью: разряжается, питает базу
   - Индикатор заряда (0-100%)

6. **Ночные враги**:
   - Спавн врагов учащается ночью (x2)
   - Враги ночью сильнее (+20% HP, +20% урон)
   - Или специальные ночные враги (более опасные)

7. **UI индикатор**:
   - Часы в интерфейсе (например, "День 12:30")
   - Иконка солнца/луны
   - Прогресс-бар до следующего цикла

8. **Визуальные эффекты**:
   - Небо меняет цвет (синее → оранжевое → тёмно-синее → чёрное)
   - Звёзды ночью (particles)
   - Луна (sprite)
   - Солнце днём

9. **Оптимизация**:
   - Не рендерить освещение от ламп вне экрана
   - Использовать один фильтр для всей сцены (не на каждый спрайт)

10. **Настройки**:
    - Опция отключить цикл (всегда день)
    - Скорость цикла (для дебага)
