# Система чертежей (Blueprints)

## Описание
Возможность сохранять участок базы как чертёж (blueprint) и копировать его в другом месте. Чертежи можно:
- Сохранять в библиотеку
- Экспортировать/импортировать (строка base64)
- Делиться с другими игроками
- Быстро размещать повторяющиеся паттерны (например, ряд furnaces)

## Оценка сложности
**Высокая (8/10)**

- Выделение области (UI для drag-select)
- Сериализация entities в JSON
- Десериализация и размещение
- Библиотека чертежей (БД или localStorage)
- Проверка ресурсов для размещения
- Автоматическая постройка ботами (опционально)

## Оценка интересности
**Очень высокая (10/10)**

Резко ускоряет развитие в поздней игре. Позволяет создавать и переиспользовать эффективные паттерны. Развивает community (обмен чертежами).

## Краткий план реализации

1. **Режим выделения**:
   - BlueprintMode.js: drag для выделения прямоугольной области
   - Визуальная рамка вокруг выделенных entities
   - Кнопка "Сохранить чертёж"

2. **Формат чертежа**:
   ```json
   {
     "name": "Smelting Array",
     "entities": [
       { "type": "furnace", "x": 0, "y": 0 },
       { "type": "conveyor", "x": 1, "y": 0, "direction": "right" },
       ...
     ],
     "size": { "width": 10, "height": 5 }
   }
   ```

3. **База данных**:
   - Таблица `blueprint`: user_id, name, data (JSON), created_at
   - Или хранить в localStorage на клиенте

4. **Размещение чертежа**:
   - Ghost entities (полупрозрачные)
   - Проверка коллизий
   - Показ стоимости (сумма всех entities)
   - Подтверждение → создание всех entities

5. **Автоматическая постройка**:
   - Новый entity_type "Робот-строитель"
   - Берёт ресурсы из инвентаря/сундуков
   - Строит ghost entities по очереди

6. **Библиотека**:
   - UI окно с сохранёнными чертежами
   - Иконки-превью (рендер чертежа в canvas)
   - Поиск, фильтры, категории

7. **Экспорт/импорт**:
   - Кнопка "Экспорт": копировать base64 строку в clipboard
   - Кнопка "Импорт": вставить строку → добавить в библиотеку
