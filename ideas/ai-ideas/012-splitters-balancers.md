# Разветвители и балансировщики (Splitters)

## Описание
Здание "Splitter" для распределения ресурсов с одного конвейера на два (или больше):
- Равномерное распределение (50/50)
- Фильтры (один ресурс налево, другой направо)
- Приоритет (заполнить сначала левый, потом правый)
- Balancer паттерны для равномерного распределения между многими линиями

## Оценка сложности
**Средняя (6/10)**

- entity_type "Splitter"
- Логика распределения ресурсов (round-robin)
- Фильтры (UI для настройки)
- Приоритеты входов/выходов
- Несколько входов, несколько выходов

## Оценка интересности
**Высокая (9/10)**

Критически важно для масштабирования производства. Позволяет создавать эффективные main buses и balancers.

## Краткий план реализации

1. **Базовый Splitter (1→2)**:
   - entity_type "Splitter"
   - 1 вход, 2 выхода (left, right)
   - Размер: 2x1 тайла
   - Распределение: round-robin (первый ресурс налево, второй направо, и т.д.)

2. **Фильтры**:
   - UI: настроить какой ресурс на какой выход
   - Пример: Iron Plate → Left, Copper Plate → Right
   - Если фильтр не подходит: ресурс идёт на любой выход

3. **Приоритет входа**:
   - Настройка: "Input priority: Left / Right"
   - Сначала брать ресурсы с приоритетного входа
   - Только если он пуст → брать со второго

4. **Приоритет выхода**:
   - Настройка: "Output priority: Left / Right"
   - Сначала заполнять приоритетный выход
   - Только если он полон → отправлять на второй

5. **Варианты Splitter**:
   - **1→2 Splitter**: 1 вход, 2 выхода (базовый)
   - **2→2 Splitter**: 2 входа, 2 выхода (объединение + разделение)
   - **1→3 Splitter**: 1 вход, 3 выхода (33/33/33)
   - **3→3 Splitter**: 3 входа, 3 выхода

6. **ResourceTransport логика**:
   - При получении ресурса:
     1. Проверить фильтры
     2. Проверить приоритет выхода
     3. Выбрать следующий доступный выход (round-robin)
     4. Отправить ресурс

7. **Визуал**:
   - Спрайт с стрелками (1 вход → 2 выхода)
   - Индикаторы фильтров (иконки ресурсов на выходах)
   - Анимация: ресурсы разделяются внутри

8. **UI настройки**:
   - Клик на Splitter → окно настроек
   - Фильтры: drop-down для каждого выхода
   - Приоритеты: radio buttons

9. **Balancer паттерны**:
   - Игроки могут строить сложные паттерны из splitters
   - Пример: 4→4 balancer (4 входа равномерно на 4 выхода)
   ```
   [Conveyor 1] ─┐
   [Conveyor 2] ─┼─ [Splitters] ─┬─ [Conveyor A]
   [Conveyor 3] ─┤               ├─ [Conveyor B]
   [Conveyor 4] ─┘               ├─ [Conveyor C]
                                 └─ [Conveyor D]
   ```

10. **Разблокировка**:
    - Технология "Logistics 1"
    - Стоимость: Iron Plates + Gears + Electronic Circuits

11. **Балансировка**:
    - Скорость: такая же как конвейер (не замедляет)
    - Цена: средняя (5 Iron Plates, 5 Gears, 5 Electronics)
