# Логистические роботы

## Описание
Летающие роботы, которые автоматически переносят ресурсы между хранилищами (сундуками) без конвейеров. Работают в зоне действия Roboport (порта роботов). Два типа:
- **Logistic robots**: переносят ресурсы
- **Construction robots**: строят/чинят/разбирают здания

## Оценка сложности
**Очень высокая (9/10)**

- unit_type для роботов (летающие)
- Система задач для роботов
- Roboport (зарядка, хранение роботов)
- Умные сундуки (requester, provider, storage)
- Сеть портов (объединение зон покрытия)
- Приоритеты задач
- Визуализация полёта роботов

## Оценка интересности
**Очень высокая (10/10)**

Революционизирует логистику. Убирает необходимость в километрах конвейеров. Поздняя игра становится намного удобнее.

## Краткий план реализации

1. **Roboport**:
   - entity_type "Roboport"
   - Радиус покрытия: 50 тайлов
   - Хранит роботов (50 логистических, 50 строительных)
   - Зарядные площадки
   - Порты объединяются в сеть (если радиусы пересекаются)

2. **Умные сундуки**:
   - **Passive Provider**: отдаёт ресурсы (жёлтый)
   - **Active Provider**: активно отправляет ресурсы (фиолетовый)
   - **Storage**: хранилище (красный)
   - **Requester**: запрашивает ресурсы (синий)
   - UI для настройки запросов/фильтров

3. **Logistic Robot**:
   - Алгоритм:
     1. Найти Requester с незаполненным запросом
     2. Найти Provider с нужным ресурсом
     3. Лететь к Provider → взять ресурс
     4. Лететь к Requester → положить ресурс
     5. Вернуться в Roboport для зарядки
   - Скорость полёта: 5 тайлов/сек
   - Вместимость: 1 стак

4. **Construction Robot**:
   - Строит ghost entities (из чертежей)
   - Чинит повреждённые здания
   - Разбирает marked for deconstruction
   - Берёт ресурсы из Storage chest

5. **База данных**:
   - unit_type: logistic_robot, construction_robot
   - entity: для умных сундуков добавить поля:
     - chest_mode (passive_provider, requester, etc.)
     - request_filters (JSON): `{ resource_id: quantity }`
   - Roboport: available_robots, charging_robots

6. **Сеть**:
   - Все Roboports в радиусе друг от друга = одна сеть
   - Роботы могут летать по всей сети
   - Автоматическая балансировка роботов между портами

7. **Визуализация**:
   - Анимация полёта роботов (двигаются по прямой)
   - Несут ресурс (спрайт ресурса под роботом)
   - Радиусы покрытия портов (зелёный круг)
   - Индикатор зарядки робота (жёлтый → летит заряжаться)

8. **Производство роботов**:
   - Рецепты для крафта роботов
   - Можно добавлять в Roboport вручную
   - Или Roboport сам крафтит при наличии ресурсов
