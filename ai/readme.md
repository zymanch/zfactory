# Stable Diffusion WebUI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–æ–≤

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–∫–∞–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É Stable Diffusion WebUI –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–æ–≤ –ª–µ–Ω–¥–∏–Ω–≥–æ–≤.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ñ–µ–ª–µ–∑–æ
- **GPU:** NVIDIA GTX 1660 Ti (6GB VRAM) –∏–ª–∏ –ª—É—á—à–µ
- **RAM:** 16GB –∏–ª–∏ –±–æ–ª—å—à–µ
- **–î–∏—Å–∫:** 15GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –°–æ—Ñ—Ç
- **Git:** https://git-scm.com/download/win
- **Python:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ WebUI

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å Realistic Vision v6.0:
# https://civitai.com/models/4201
# –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞: https://civitai.com/api/download/models/245598

# 2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π .safetensors —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É:
ai/model/

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
install.bat
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
- ‚úÖ –ö–ª–æ–Ω–∏—Ä—É–µ—Ç Stable Diffusion WebUI
- ‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç –º–æ–¥–µ–ª—å –≤ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º API

### 2. Fix

ai/stable-diffusion-webui/modules/launch_utils.py:349 
–∑–∞–º–µ–Ω—Ç—å –Ω–∞
stable_diffusion_repo = os.environ.get('STABLE_DIFFUSION_REPO', "https://github.com/joypaul162/Stability-AI-stablediffusion.git")

### 3. –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ WebUI:
start.bat

# –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
# API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: http://localhost:7860
```

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø—Ä–∞–π—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ WebUI, –≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

```bash
# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:
cd ..

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –≤—Å–µ –ª–µ–Ω–¥–∏–Ω–≥–∏:
php yii landing/generate-ai all

# –ò–ª–∏ –æ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π:
php yii landing/generate-ai grass

# –°–æ–∑–¥–∞–π—Ç–µ –∞—Ç–ª–∞—Å—ã:
php yii landing/generate

# –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ JS:
npm run assets
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
ai/
‚îú‚îÄ‚îÄ install.bat              # –£—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ start.bat                # –ó–∞–ø—É—Å–∫ WebUI
‚îú‚îÄ‚îÄ README.md                # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ model/                   # –°—é–¥–∞ –ø–æ–ª–æ–∂–∏—Ç–µ .safetensors —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ (–≤–∞—à–∞ –º–æ–¥–µ–ª—å).safetensors
‚îî‚îÄ‚îÄ stable-diffusion-webui/  # –°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    ‚îú‚îÄ‚îÄ webui.bat
    ‚îú‚îÄ‚îÄ webui-user.bat       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å API
    ‚îî‚îÄ‚îÄ models/
        ‚îî‚îÄ‚îÄ Stable-diffusion/
            ‚îî‚îÄ‚îÄ (–º–æ–¥–µ–ª—å –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Å—é–¥–∞)
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API

–§–∞–π–ª `stable-diffusion-webui/webui-user.bat` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```bat
set COMMANDLINE_ARGS=--api --listen --port 7860 --xformers
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--api` - –≤–∫–ª—é—á–∞–µ—Ç REST API
- `--listen` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `--port 7860` - –ø–æ—Ä—Ç API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `--xformers` - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:
`src/commands/LandingController.php` –≤ –º–µ—Ç–æ–¥–µ `generateViaSdApi()`

```php
$payload = [
    'width' => 512,           // –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    'height' => 384,
    'steps' => 25,            // –ö–∞—á–µ—Å—Ç–≤–æ (20-30)
    'cfg_scale' => 7,         // –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç—É (7-10)
    'sampler_name' => 'DPM++ 2M Karras',
    'tiling' => true,         // –ë–µ—Å—à–æ–≤–Ω–æ—Å—Ç—å (–≤–∞–∂–Ω–æ!)
];
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### WebUI –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Git
```bash
# –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git
https://git-scm.com/download/win
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ "Couldn't launch python"
```bash
# –†–µ—à–µ–Ω–∏–µ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ start.bat –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ü–ö–ú ‚Üí –ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
# WebUI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç Python –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

# –†–µ—à–µ–Ω–∏–µ 2: –ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python –≤—Ä—É—á–Ω—É—é:
# 1. –°–∫–∞—á–∞–π—Ç–µ Python 3.10.6: https://www.python.org/ftp/python/3.10.6/python-3.10.6-amd64.exe
# 2. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É "Add Python to PATH"
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ start.bat —Å–Ω–æ–≤–∞

# –†–µ—à–µ–Ω–∏–µ 3: –ï—Å–ª–∏ Python —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω:
# –î–æ–±–∞–≤—å—Ç–µ Python –≤ PATH –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –≥–∞–ª–æ—á–∫–æ–π "Add to PATH"
```

### API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ä—Ç 7860 –∑–∞–Ω—è—Ç
```bash
# –†–µ—à–µ–Ω–∏–µ: –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ webui-user.bat
set COMMANDLINE_ARGS=--api --listen --port 7861 --xformers

# –ò –≤ LandingController.php:
$apiUrl = 'http://localhost:7861';
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç GPU –∏–ª–∏ —Å–ª–∞–±–∞—è –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞
```bash
# –†–µ—à–µ–Ω–∏–µ 1: –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
'width' => 256,
'height' => 192,

# –†–µ—à–µ–Ω–∏–µ 2: –£–º–µ–Ω—å—à–∏—Ç–µ steps
'steps' => 15,

# –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–π sampler
'sampler_name' => 'Euler a',
```

### Out of Memory

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ VRAM
```bash
# –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥–∏ –≤ webui-user.bat
set COMMANDLINE_ARGS=--api --listen --port 7860 --xformers --medvram
# –∏–ª–∏ –¥–ª—è –æ—á–µ–Ω—å —Å–ª–∞–±—ã—Ö GPU:
set COMMANDLINE_ARGS=--api --listen --port 7860 --xformers --lowvram
```

## üåü –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

### –î–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Ç–µ–∫—Å—Ç—É—Ä:
- **Realistic Vision v6.0** ‚≠ê (4.59 GB)
  - https://civitai.com/models/4201
  - –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –≤–∞—à–∏—Ö —Å–ø—Ä–∞–π—Ç–æ–≤

- **DreamShaper 8** (5.13 GB)
  - https://civitai.com/models/4384

### –î–ª—è pixel art:
- **Pixel Art Diffusion XL** (6.46 GB)
  - https://civitai.com/models/120096

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| GPU | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ | –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
|-----|-----------|-----------------|
| RTX 4090 | 512√ó384 | ~10 —Å–µ–∫ |
| RTX 3060 | 512√ó384 | ~30 —Å–µ–∫ |
| GTX 1660 Ti | 512√ó384 | ~60 —Å–µ–∫ |
| CPU only | 512√ó384 | ~5-10 –º–∏–Ω |

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Stable Diffusion WebUI GitHub](https://github.com/AUTOMATIC1111/stable-diffusion-webui)
- [Civitai Models](https://civitai.com)
- [API Documentation](http://localhost:7860/docs) (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

## üìù Workflow

```bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ WebUI (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ):
cd C:\Sites\zfactory.local\ai
start.bat

# 2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ (~1-2 –º–∏–Ω—É—Ç—ã)

# 3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ø—Ä–∞–π—Ç—ã (–≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ):
cd C:\Sites\zfactory.local
php yii landing/generate-ai all

# 4. –°–æ–∑–¥–∞–π—Ç–µ –∞—Ç–ª–∞—Å—ã:
php yii landing/generate

# 5. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ:
npm run assets

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5)
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- WebUI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –î–û –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `php yii landing/generate-ai`
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ WebUI –∑–∞–Ω–∏–º–∞–µ—Ç 5-10 –º–∏–Ω—É—Ç (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö 10 –ª–µ–Ω–¥–∏–Ω–≥–æ–≤ –∑–∞–π–º–µ—Ç ~5-10 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç GPU)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tiling: true` –¥–ª—è –±–µ—Å—à–æ–≤–Ω—ã—Ö —Ç–µ–∫—Å—Ç—É—Ä (—É–∂–µ –≤–∫–ª—é—á–µ–Ω–æ)

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞, –≤—Å–µ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ:

```bash
php yii landing/generate-ai all
```

–ì–æ—Ç–æ–≤–æ! üöÄ
